const url=new URL(window.location);$(window).on("popstate",a=>{$.ajax({url:"/storage/search",method:"POST",data:{filter:a.state.search},success:searchSuccess,error:searchError})});
$(document).ready(()=>{$.ajax({url:"/storage/search",method:"POST",data:{filter:url.searchParams.get("search")},success:searchSuccess,error:searchError});$("#god-search-button").click(()=>{url.searchParams.set("search",$("#god-search-bar").val());window.history.pushState({search:$("#god-search-bar").val()},"",url);$.ajax({url:"/storage/search",method:"POST",data:{filter:$("#god-search-bar").val()},success:searchSuccess,error:searchError})})});
function searchSuccess(a){for(;1<$("#god-list").children().length;)$("#god-list").children().last().remove();if(0<a.result.length)for(var b of a.result)godItem=`
            <a href="/edit?godId=${b.godId}">
                <div id="${b.godId}" class="god-item">
                    <h2 class="god-header">${b.name}</h2>
                    <p class="god-meta">Domain: ${b.domain}, Pantheon: ${b.pantheon}</p>
                </div>
            </a>`,$("#god-list").append(godItem);else $("#god-list").append('\n        <div class="god-item">\n            <h2 class="god-header">No Gods Found</h2>\n        </div>');$("#god-list").attr("class","");$("#god-list-error").attr("class","ui hidden error message")}function searchError(a){$("#god-list-error-message").text(a.message);$("#god-list").attr("class","");$("#god-list-error").attr("class","ui error message")};
