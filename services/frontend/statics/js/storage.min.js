const url=new URL(window.location);$(window).on("popstate",a=>{console.log("recovering previous search");$.ajax({url:"/storage/search",method:"POST",data:{query:a.state.search},beforeSend:searchWait,success:searchSuccess,error:searchError})});
$(document).ready(()=>{console.log(`matching search to url: ${url.search}`);$.ajax({url:"/storage/search",method:"POST",data:{query:url.searchParams.get("search")},beforeSend:searchWait,success:searchSuccess,error:searchError}).then();$("#god-search-bar").keypress(a=>{"13"==a.which&&(console.log(`searching for gods: ${$("#god-search-bar").val()}`),a.preventDefault(),url.searchParams.set("search",$("#god-search-bar").val()),window.history.pushState({search:$("#god-search-bar").val()},"",url),$.ajax({url:"/storage/search",
method:"POST",data:{query:$("#god-search-bar").val()},beforeSend:searchWait,success:searchSuccess,error:searchError}))});$("#testing-log-input").keypress(a=>{if("13"==a.which){a.preventDefault();a=$("#testing-log-input").val();var b=$("#testing-log-dropdown").val();switch(b){case "console":console.log(a);$("#testing-log-input").val("");break;case "datadog":$("#testing-log-input").val("");(window.DD_LOGS&&window.DD_LOGS.logger).info(a);break;default:throw console.error(`unrecognized logging method: ${b}`),
Error(`Didn't recognize logging method: ${b}`);}}});$("#testing-error-button").click(()=>{console.log("generating testing error");$.ajax({url:"https://random-word-api.herokuapp.com/word?number=3",method:"GET",success:a=>{throw Error(`Example error: ${a[0]} - ${a[1]} - ${a[2]}`);},error:a=>console.error(`error request failed: ${a.status} - ${a.message}`)})});$("#testing-custom-event-button").click(()=>{console.warn("warning for custom action button");window.DD_RUM&&window.DD_RUM.addAction("custom-testing-action",
{value:"testing"})})});function searchWait(a){for(;2<$("#god-list").children().length;)$("#god-list").children().last().remove();$("#god-list").attr("class","");$("#god-list-loader").attr("class","ui active text loader");$("#god-list-error").attr("class","ui hidden error message")}function searchSuccess(a){if(0<a.result.length)for(var b of a.result)godItem=`
            <a href="/edit?godId=${b.godId}">
                <div id="${b.godId}" class="god-item">
                    <h2 class="god-header">${b.name}</h2>
                    <p class="god-meta">Domain: ${b.domain}, Pantheon: ${b.pantheon}</p>
                </div>
            </a>`,$("#god-list").append(godItem);else $("#god-list").append('\n        <div class="god-item">\n            <h2 class="god-header">No Gods Found</h2>\n        </div>');$("#god-list").attr("class","");$("#god-list-loader").attr("class","ui hidden text loader");$("#god-list-error").attr("class","ui hidden error message");console.log(`search succeeded: ${a.status}`)}
function searchError(a){$("#god-list-error-message").text(a.message);$("#god-list").attr("class","");$("#god-list-loader").attr("class","ui hidden text loader");$("#god-list-error").attr("class","ui error message");console.error(`search failed: ${a.status} - ${a.message}`)};
