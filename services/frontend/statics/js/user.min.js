console.log("getting user notes");$.ajax({url:`${window.location.pathname}/notes`,method:"GET",success:a=>{if(0<a.notes.length){$("#no-user-notes").hide();for(var b of a.notes)$("#selected-user-notes").append(`<li>${b}</li>`)}console.log(`getting notes succeeded: ${a.status}`)},error:a=>console.error(`getting notes failed: ${a.status} - ${a.message}`)});$(document).ready(()=>loadUsers());
function loadUsers(){console.log("getting users list");$.ajax({url:"/users/all",method:"GET",beforeSend:()=>{for(;1<$("#user-list").children().length;)$("#user-list").children().last().remove();$("#user-list").attr("class","");$("#user-list-loader").attr("class","ui active text loader");$("#user-list-error").attr("class","ui hidden error message")},success:a=>{if(0<a.users.length)for(var b of a.users)item=`
                    <div class="user-item" data-username="${b.username}">
                        <h3 class="user-header">
                            <div>${b.username}</div>
                            <button class="ui small red icon delete-user button" data-username="${b.username}"><i class="ui trash icon"></i></button>
                        </h3>
                    </div>`,$("#user-list").append(item);else $("#user-list").append('\n                <div class="user-item">\n                    <h2 class="user-header">No Users Found</h2>\n                </div>');$(".user-item").click(function(){window.location=`/user/${this.data("username")}`});$(".delete-user").click(function(){$.ajax({url:"/user/delete",method:"POST",data:{username:this.data("username")},success:c=>{console.log(`deleting user succeeded: ${c.status}`);console.log("reloading users");
loadUsers()},error:c=>console.error(`deleting user failed: ${c.status} - ${c.message}`)})});$("#user-list").attr("class","");$("#user-list-loader").attr("class","ui hidden text loader");$("#user-list-error").attr("class","ui hidden error message");console.log(`getting users succeeded: ${a.status}`)},error:a=>{$("#user-list-error-message").text(a.message);$("#user-list").attr("class","");$("#user-list-loader").attr("class","ui hidden text loader");$("#user-list-error").attr("class","ui error message");
console.error(`getting users failed: ${a.status} - ${a.message}`)}})};
