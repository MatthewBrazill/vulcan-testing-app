$(document).ready(()=>{$("#sign-up-form").submit(c=>{c.preventDefault();console.log("user signing up");$.ajax({url:"/user/create",method:"POST",data:{username:$("#sign-up-username").val(),password:$("#sign-up-password").val()},beforeSend:()=>{$("#sign-up-wait").attr("class","ui message")},success:a=>{$("#sign-up-wait").attr("class","ui hidden message");$("#sign-up-form").attr("class","ui success form");console.log(`signup succeeded: status ${a.status}`);console.log("user logging in");$.ajax({url:"/login",
method:"POST",data:{username:$("#sign-up-username").val(),password:$("#sign-up-password").val()},success:b=>{window.location="/storage";console.log(`login succeeded: status ${b.status}`)},error:b=>{$("#sign-up-form").attr("class","ui error form");$("#sign-up-error-message").text(b.message);console.error(`login failed: status ${b.status} - ${b.message}`)}})},error:a=>{$("#sign-up-wait").attr("class","ui hidden message");$("#sign-up-form").attr("class","ui error form");$("#sign-up-error-message").text(a.message);
console.error(`signup failed: status ${a.status} - ${a.message}`)}})})});
